class SchedulerRegistry {
  constructor() {
    this._cronJobs = new Map();
    this._timeouts = new Map();
  }

  addCronJob(name, job) {
    this._cronJobs.set(name, job);
  }

  getCronJob(name) {
    if (!this._cronJobs.has(name)) {
      throw new Error(`Cron job ${name} does not exist`);
    }
    return this._cronJobs.get(name);
  }

  deleteCronJob(name) {
    this._cronJobs.delete(name);
  }

  addTimeout(name, ref) {
    this._timeouts.set(name, ref);
  }

  getTimeout(name) {
    if (!this._timeouts.has(name)) {
      throw new Error(`Timeout ${name} does not exist`);
    }
    return this._timeouts.get(name);
  }

  deleteTimeout(name) {
    this._timeouts.delete(name);
  }
}

const ScheduleModule = {
  forRoot() {
    return {
      module: class ScheduleShimModule {},
    };
  },
};

module.exports = {
  SchedulerRegistry,
  ScheduleModule,
};
